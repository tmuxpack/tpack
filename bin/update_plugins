#!/usr/bin/env bash

# Script intended for use via the command line.
#
# `.tmux.conf` needs to be set for tpack. Tmux has to be installed on the system,
# but does not need to be started in order to run this script.

CURRENT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
source "$CURRENT_DIR/../lib/find_binary.sh"

TPACK_BIN="$(_find_tpack "$CURRENT_DIR/..")"

if [ -n "$TPACK_BIN" ]; then
	if [ $# -eq 0 ]; then
		PROGRAM_NAME="$0"
		echo "usage:"
		echo "  $PROGRAM_NAME all                   update all plugins"
		echo "  $PROGRAM_NAME tmux-foo              update plugin 'tmux-foo'"
		echo "  $PROGRAM_NAME tmux-bar tmux-baz     update multiple plugins"
		exit 1
	fi
	exec "$TPACK_BIN" update "$@"
fi

echo "Error: tpack binary not found." >&2
exit 1
